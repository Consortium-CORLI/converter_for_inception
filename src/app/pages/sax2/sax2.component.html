<dx-tab-panel #tabPanel id="main_tab_panel">
  <!-- <dxi-item title="Conversion"> -->
  <dxi-item title="{{ custom_conversion }}">
  <!-- <dxi-item [title]="LANG_title_converting"> -->

    <div class="content-block">
      <!-- <dx-button stylingMode="contained" type="normal" (onClick)="switch_to_french()">
        <img src="french_flag.svg" height="20">
      </dx-button>
      <dx-button stylingMode="contained" type="normal" (onClick)="switch_to_english()">
        <img src="uk_flag.svg" height="20">
      </dx-button> -->

      <!-- <dx-toolbar> -->

      <dxi-item location="before">
        <!-- <dx-file-uploader #up id="dx-file-uploader_xml_files" selectButtonText="Charger des fichiers XML" labelText="" accept=".xml"
          uploadMode="useForm" multiple="true" [showFileList]="false"
          (onValueChanged)="onFileUploaderValueChanged($event)"> -->
          <dx-file-uploader #up id="dx-file-uploader_xml_files" selectButtonText="{{ custom_load_xml_files }}" labelText="" accept=".xml"
            uploadMode="useForm" multiple="true" [showFileList]="false"
            (onValueChanged)="onFileUploaderValueChanged($event)">
        </dx-file-uploader>
          <!-- <dx-file-uploader #up id="dx-file-uploader_xml_files" [selectButtonText]="LANG_dx_file_uploader_xml_files" labelText="" accept=".xml"
            uploadMode="useForm" multiple="true" [showFileList]="false"
            (onValueChanged)="onFileUploaderValueChanged($event)">
        </dx-file-uploader> -->
      </dxi-item>

      <!-- <dxi-item location="after" [visible]="suggestionTickVisible" style="margin-right:16px">
        <dx-check-box text="Suggestions" [(value)]="suggestionPopupTagsVisible"></dx-check-box>
      </dxi-item> -->


      <!-- </dx-toolbar> -->
    </div>

    <!-- <div class="content-block"> -->
    <div id="suggestion_div" class="content-block" style="display:none">
      <dx-data-grid id="tagdefGrid" [allowColumnResizing]="true" [columnAutoWidth]="true"
        [dataSource]="suggestionDataSource" keyExpr="id" [showColumnHeaders]="true"
        (onRowUpdated)="onRowUpdated($event)" [showBorders]="true"
        (onToolbarPreparing)="onToolbarPreparingSuggestionPopup($event)" (onRowUpdated)="updateSystem()">
        <dxo-editing mode="popup" [allowUpdating]="true" [allowDeleting]="true" [allowAdding]="false"></dxo-editing>
        <dxo-scrolling mode="normal"></dxo-scrolling>

        <!-- <dxi-column dataField="quality" caption="Qualité" [allowEditing]="false"></dxi-column> -->
        <dxi-column dataField="quality" caption="{{ custom_quality }}" [allowEditing]="false"></dxi-column>
        <!-- <dxi-column dataField="quality" [caption]="LANG_caption_quality" [allowEditing]="false"></dxi-column> -->
        <!-- <dxi-column dataField="scale" caption="Echelle" [allowEditing]="false"></dxi-column> -->
        <dxi-column dataField="scale" caption="{{ custom_scale }}" [allowEditing]="false"></dxi-column>
        <!-- <dxi-column dataField="scale" [caption]="LANG_caption_scale" [allowEditing]="false"></dxi-column> -->
        <!-- <dxi-column dataField="suggestions_str" caption="Suggestions" [allowEditing]="false">
        </dxi-column> -->
        <dxi-column dataField="suggestions_str" caption="{{ custom_suggestions }}" [allowEditing]="false">
        </dxi-column>
        <!-- <dxi-column dataField="suggestions_str" [caption]="LANG_caption_suggestions" [allowEditing]="false">
        </dxi-column> -->
        <!-- <dxi-column dataField="choice" caption="Choix"></dxi-column> -->
        <dxi-column dataField="choice" caption="{{ custom_choice }}"></dxi-column>
        <!-- <dxi-column dataField="choice" [caption]="LANG_caption_choice"></dxi-column> -->

        <div *dxTemplate="let data of 'cellTemplate'">
          <dx-color-box [readOnly]="true" [value]="data.value" applyButtonText="OK" cancelButtonText="Annuler">
          </dx-color-box>
        </div>

      </dx-data-grid>
      <br />
      <!-- <span id="first_document_announcer_span" style="display:block">Premier document (sur <span id="number_of_documents_span"></span>)</span> -->
      <span id="first_document_announcer_span" style="display:block">{{ custom_first_document_out_of }} <span id="number_of_documents_span"></span>)</span>
      <br />
      <dx-text-area [spellcheck]="false" [value]="first_document" [visible]="firstDocumentVisible" height="15%">
      </dx-text-area>
      <br />

      <!-- <dxi-item location="before" [visible]="auto_authentication"> -->
      <!-- <dxi-item location="before" [visible]="suggestionPopupTagsVisible"> -->
      <dxi-item location="before">

        <!-- <span id="project_name_span">Nom du projet :</span> -->
        <span id="project_name_span">{{ custom_project_name }}:</span>
        <dx-text-box placeholder="Nom du projet" id="project_name_input" style="display:inline"
          [(value)]="project_name">
        </dx-text-box>
        <canvas id="captcha_canvas" style="display:inline; position: absolute; right: 22%" width="180"
          height="50"></canvas>
          <dx-text-box placeholder="CAPTCHA" id="captcha_input"
            style="display:inline; position:absolute; right: 2%" [(value)]="captcha_user_answer"></dx-text-box>
            <!-- <dx-text-box [placeholder]="LANG_captcha_placeholder" id="captcha_input"
              style="display:inline; position:absolute; right: 2%" [(value)]="captcha_user_answer"></dx-text-box> -->

      </dxi-item>
      <dxi-item location="after">

        <!-- <dx-button stylingMode="contained" text="Générer" type="normal" [width]="300" [visible]="firstDocumentVisible"
          (onClick)="generer()">
        </dx-button> -->
        <dx-button stylingMode="contained" text="{{ custom_generate }}" type="normal" [width]="300" [visible]="firstDocumentVisible"
          (onClick)="generer()">
        </dx-button>
        <!-- <dx-button stylingMode="contained" [text]="LANG_generate" type="normal" [width]="200" [visible]="firstDocumentVisible"
        (onClick)="generer()">
      </dx-button> -->

      </dxi-item>
      <br />
      <dx-progress-bar [min]="0" [max]="100" [value]="conversion_progress"></dx-progress-bar>
    </div>
  </dxi-item>
  <!-- <dxi-item title="Balises"> -->
  <dxi-item title="{{ custom_tags }}">
  <!-- <dxi-item [title]="LANG_title_tags"> -->
    <!-- <h2 class="content-block">Conversion (alt. sax parser) {{fichierXML}} </h2> -->
    <div class="content-block">

      <!-- <dx-toolbar>

        <dxi-item location="before">
          <dx-file-uploader #up selectButtonText="Charger des fichiers XML" labelText="" accept=".xml"
            uploadMode="useForm" multiple="true" [showFileList]="false"
            (onValueChanged)="onFileUploaderValueChanged($event)">
          </dx-file-uploader>
        </dxi-item>

        <dxi-item location="after" [visible]="suggestionTickVisible" style="margin-right:16px">
          <dx-check-box text="Suggestions" [(value)]="suggestionPopupTagsVisible"></dx-check-box>
        </dxi-item>


      </dx-toolbar> -->

      <dx-data-grid id="tagdefGrid" [allowColumnResizing]="true" [columnAutoWidth]="true"
        [dataSource]="tagdefDataSource" keyExpr="id" [showColumnHeaders]="true" (onRowUpdated)="onRowUpdated($event)"
        [showBorders]="true" (onToolbarPreparing)="onToolbarPreparing($event)" height="100%">

        <dxo-scrolling mode="normal"></dxo-scrolling>
        <dxo-editing mode="popup" [allowUpdating]="true" [allowDeleting]="true" [allowAdding]="false"></dxo-editing>
        <dxo-popup [fullScreen]="false" title="Edition" [showTitle]="true" [width]="800" [height]="350"> </dxo-popup>
        <dxo-form [colCount]="1" [labelLocation]="'left'">
          <dxi-item editorType="dxSelectBox" dataField="type"></dxi-item>
          <dxi-item editorType="dxTextBox" dataField="constraint"></dxi-item>
          <dxi-item editorType="dxColorBox" [editorOptions]="{ editAlphaChannel: true }" dataField="color"></dxi-item>
        </dxo-form>

        <dxo-selection mode="single"></dxo-selection>

        <!-- <dxi-column dataField="tag" caption="Balise" [allowEditing]="false"></dxi-column> -->
        <dxi-column dataField="tag" caption="{{ custom_tag }}" [allowEditing]="false"></dxi-column>
        <!-- <dxi-column dataField="attrsstr" caption="Attributs" [allowEditing]="false"></dxi-column> -->
        <!-- <dxi-column dataField="attrs" caption="Attributs" [allowEditing]="false"></dxi-column> -->
        <dxi-column dataField="attrs" caption="{{ custom_attributes }}" [allowEditing]="false"></dxi-column>
        <!-- <dxi-column dataField="constraint" caption="Contrainte"> -->
        <dxi-column dataField="constraint" caption="{{ custom_constraint }}">
          <dxo-lookup [dataSource]="constraintTypes" displayExpr="label" valueExpr="value">
          </dxo-lookup>

        </dxi-column>
        <!-- <dxi-column dataField="type" caption="Type"> -->
        <dxi-column dataField="type" caption="{{ custom_type }}">
          <dxo-lookup [dataSource]="tagTypes" displayExpr="label" valueExpr="value">
          </dxo-lookup>
        </dxi-column>

        <!-- <dxi-column dataField="quantity" caption="Quantité" [allowEditing]="false"></dxi-column> -->
        <dxi-column dataField="quantity" caption="{{ custom_quantity }}" [allowEditing]="false"></dxi-column>
        <!-- <dxi-column dataField="averageCharCount" caption="Longueur moyenne" [allowEditing]="false"></dxi-column> -->
        <dxi-column dataField="averageCharCount" caption="{{ custom_average_length }}" [allowEditing]="false"></dxi-column>


        <div *dxTemplate="let data of 'cellTemplate'">
          <dx-color-box [readOnly]="true" [value]="data.value" applyButtonText="OK" cancelButtonText="Annuler">
          </dx-color-box>
        </div>

      </dx-data-grid>

      <dx-scroll-view width="100%">
        <pre>
    <p id="xml_p"></p>
    </pre>
      </dx-scroll-view>


    </div>

  </dxi-item>

  <!-- <dxi-item title="Historique"> -->
  <dxi-item title="{{ custom_history }}">
  <!-- <dxi-item [title]="LANG_title_history"> -->
    <div class="content-block">
      <dx-data-grid [allowColumnResizing]="true" [columnAutoWidth]="true" [dataSource]="history_list" keyExpr="id"
        [showColumnHeaders]="true" (onRowUpdated)="onRowUpdated($event)" [showBorders]="true"
        (onToolbarPreparing)="onToolbarPreparing($event)" height="100%">

        <dxo-selection mode="single"></dxo-selection>

        <!-- <dxi-column dataField="id" caption="#" [allowEditing]="false"></dxi-column> -->
        <!-- <dxi-column dataField="id" caption="Indice" [allowEditing]="false"></dxi-column> -->
        <!-- <dxi-column dataField="id" caption="Indice" [allowEditing]="false"></dxi-column> -->
        <dxi-column dataField="id" caption="{{ custom_index }}" [allowEditing]="false"></dxi-column>
        <!-- <dxi-column dataField="project_name" caption="Nom du projet" [allowEditing]="false"></dxi-column> -->
        <dxi-column dataField="project_name" caption="{{ custom_project_name }}" [allowEditing]="false"></dxi-column>
        <!-- <dxi-column dataField="doc_separator" caption="Séparateur de document" [allowEditing]="false"></dxi-column> -->
        <dxi-column dataField="doc_separator" caption="{{ custom_document_separator }}" [allowEditing]="false"></dxi-column>
        <!-- <dxi-column dataField="date" caption="Date" [allowEditing]="false"></dxi-column> -->
        <dxi-column dataField="date" caption="{{ custom_date }}" [allowEditing]="false"></dxi-column>
        <!-- <dxi-column dataField="file_name" caption="Noms des fichiers" [allowEditing]="false"></dxi-column> -->
        <dxi-column dataField="file_name" caption="{{ custom_file_names }}" [allowEditing]="false"></dxi-column>

      </dx-data-grid>

      <!-- <p>Reconversion vers le format initial d'un export INCEpTION (pour se faire, faites un export avec comme format
        additionnel UIMA CAS XML 1.1, déposez le fichier ZIP ci-dessous et indiquez le numéro de la conversion initiale
        qui se trouve dans l'historique) : </p> -->
      <p>{{ custom_reconvert_to_initial_format }} </p>

      <!-- <dx-file-uploader #up selectButtonText="Charger un fichier d'export INCEpTION" labelText="" accept=".zip"
        uploadMode="useForm" multiple="true" [showFileList]="false"
        (onValueChanged)="onReconverterFileUploaderValueChanged($event)"> -->
        <dx-file-uploader #up selectButtonText="{{ custom_load_an_inception_file }}" labelText="" accept=".zip"
          uploadMode="useForm" multiple="true" [showFileList]="false"
          (onValueChanged)="onReconverterFileUploaderValueChanged($event)">
      </dx-file-uploader>
      <p id="reconverter_filename_p"></p>
      <!-- <dx-text-box placeholder="Indice dans l'historique" id="index_in_history_input" style="display:inline"
        [(value)]="index_in_history"></dx-text-box> -->
        <dx-text-box placeholder="{{ custom_index_in_history }}" id="index_in_history_input" style="display:inline"
          [(value)]="index_in_history"></dx-text-box>
      <!-- <dx-button stylingMode="contained" text="Reconvertir" type="normal" [width]="200" [visible]="true"
        (onClick)="reconvertir()"> -->
      <dx-button stylingMode="contained" text="{{ custom_reconvert }} ({{ custom_a_single_corpus }})" type="normal" [visible]="true"
        (onClick)="reconvertir()">
      </dx-button>
      <br/>
      <dx-button stylingMode="contained" text="{{ custom_reconvert }} ({{ custom_one_corpus_per_annotator }})" type="normal" [visible]="true"
        (onClick)="reconvertir_n()">
      </dx-button>

    </div>
  </dxi-item>

  <!-- <dxi-item title="Aide"> -->
  <dxi-item title="{{ custom_help }}">
  <!-- <dxi-item [title]="LANG_title_help"> -->
    <div class="content-block">
      <!-- <p>1. Chargez vos documents</p> -->
      <p>1. {{ custom_load_your_documents }}</p>
      <img src="aide1.png" style="max-width:100%">
      <br>
      <!-- <p>2. Cliquez sur le crayon pour modifier la balise séparatrice de documents</p> -->
      <p>2. {{ custom_click_on_pen }}</p>
      <img src="aide2.png" style="max-width:100%">
      <br>
      <!-- <p>3. Renseignez la balise séparatrice et cliquez sur "SAVE"</p> -->
      <p>3.{{ custom_fill_document_separator }}</p>
      <img src="aide3.png" style="max-width:100%">
      <br>
      <!-- <p>4. Remplissez le CAPTCHA</p> -->
      <p>4. {{ custom_fill_captcha }}</p>
      <img src="aide4.png" style="max-width:100%">
      <br>
      <!-- <p>5. Modifiez le nom du projet si vous le souhaitez, cliquez sur "GENERER" et patientez jusqu'à ce que votre corpus converti soit téléchargé automatiquement</p> -->
      <p>5. {{ custom_modify_project_name }}</p>
      <img src="aide5.png" style="max-width:100%">
      <br>
      <!-- <p>6. Une fois dans INCEpTION, dans l'onglet "Projects", importez le fichier téléchargé en cliquant sur "Import project"</p> -->
      <p>6. {{ custom_inception_import }}</p>
      <img src="aide6.png" style="max-width:100%">
      <!-- <br> -->

    </div>
  </dxi-item>


</dx-tab-panel>



<!-- <dx-popup [position]=" { my: 'right', at: 'center'  }" [width]="300" [height]="400" [showTitle]="true" [shading]="false"
    title="Sélection" [dragEnabled]="true" [closeOnOutsideClick]="false" [showCloseButton]="false" [resizeEnabled]="true" 
    container=".dx-viewport" [visible]="popupSelectVisible" [hideOnParentScroll]="true">
    
  </dx-popup> -->

<!-- <dx-popup [position]=" { my: 'center', at: 'center'  }" [width]="1200" [showTitle]="true" [shading]="false"
    title="Suggestions" [dragEnabled]="true" [resizeEnabled]="true"  [closeOnOutsideClick]="false" [showCloseButton]="false"
    container=".dx-viewport" [visible]="suggestionPopupTagsVisible" [hideOnParentScroll]="true" id="suggestionBox">
  
    <dx-data-grid id="tagdefGrid" [allowColumnResizing]="true" [columnAutoWidth]="true" [dataSource]="suggestionDataSource" keyExpr="id" [showColumnHeaders]="true"  (onRowUpdated)="onRowUpdated($event)"
      [showBorders]="true" (onToolbarPreparing)="onToolbarPreparingSuggestionPopup($event)" (onRowUpdated)="updateSystem()">
      <dxo-editing mode="popup" [allowUpdating]="true"    [allowDeleting]="true"    [allowAdding]="false"></dxo-editing>
      <dxo-scrolling mode="normal"></dxo-scrolling>
     
        <dxi-column dataField="quality" caption="Qualité" [allowEditing]="false"></dxi-column>
        <dxi-column dataField="scale" caption="Echelle" [allowEditing]="false"></dxi-column>
        <dxi-column dataField="suggestions_str" caption="Suggestions" [allowEditing]="false">
        </dxi-column>
        <dxi-column dataField="choice" caption="Choix"></dxi-column>      
      
      <div *dxTemplate="let data of 'cellTemplate'">
        <dx-color-box [readOnly]="true" 
            [value]="data.value"
            applyButtonText="OK"
            cancelButtonText="Annuler"
          ></dx-color-box>
      </div>
  
    </dx-data-grid>
    
      <br/>
      <span id="first_document_announcer_span" style="display:block">Premier document (sur <span id="number_of_documents_span"></span>):</span>
      <br/>
      <dx-text-area [spellcheck]="false" [value]="first_document" [visible]="firstDocumentVisible" height="15%"></dx-text-area>
      <br/>
      
      <dxi-item location="before" [visible]="auto_authentication">
        
        <span>Nom du projet : </span>
        <dx-text-box placeholder="Nom du projet" id="project_name_input" style="display:inline" [(value)]="project_name"></dx-text-box>
        <canvas id="captcha_canvas" style="display:inline; position: absolute; right: 22%" width="180" height="50"></canvas>
          <dx-text-box placeholder="Réponse au captcha" id="captcha_input" style="display:inline; position:absolute; right: 2%" [(value)]="captcha_user_answer"></dx-text-box>
          
      </dxi-item>
      <dxi-item location="after">
           
        <dx-button
        stylingMode="contained"
        text="Générer"
        type="normal"
        [width]="200"
        [visible]="firstDocumentVisible"
        (onClick)="generer()">
        </dx-button>
        
      </dxi-item>
      <br/>
      <dx-progress-bar [min]="0" [max]="100" [value]="conversion_progress"></dx-progress-bar>

  </dx-popup> -->